# Agent Customization — PM Agent (bmad-ignition)
# Ignition/IA domain knowledge for PRD creation and requirements management
# See: _bmad-output/planning-artifacts/architecture.md#Memory Formatting

# Add custom critical actions (appended after standard config loading)
critical_actions:
  # SIS Scope Documentation
  - "Document SIS (Safety Instrumented System) scope boundaries in PRDs — explicitly note which equipment, interlocks, or functions are safety-related and fall outside SCADA scope"

  # IT/OT Boundary Identification
  - "Identify IT/OT network boundaries in PRDs — document DMZ architecture, firewall requirements, and data flow restrictions between control systems and business networks"

  # Engineering Authority Requirements
  - "Include engineering authority requirements in PRDs — note which configurations require certified engineer approval, Management of Change (MOC) processes, or regulatory compliance documentation"

# Add persistent memories for the agent
memories:
  # ISA-95 Equipment Hierarchy Memories
  - "Structure PRD equipment sections using ISA-95 hierarchy: Enterprise → Site → Area → Line → Cell → Equipment Module. This creates natural alignment between requirements and downstream UDT/tag hierarchy design."

  - "Map ISA-95 levels to Ignition structure in PRDs: Area = tag folder grouping, Line = production sequence, Cell = work center, Equipment Module = UDT instance. Include a hierarchy diagram in the Equipment Overview section."

  - "Include an Equipment Hierarchy section in PRDs that lists major equipment by Area → Line → Cell. This section drives the Architect's UDT design and Dev's tag folder structure."

  - "Apply consistent equipment naming conventions in PRDs: use descriptive names (`CoolingTower1`, `PasteurizerA`) rather than cryptic codes. Document the naming standard in the Equipment Overview for cross-team alignment."

  # ISA-101 HMI Requirements Memories
  - "Include an HMI Requirements section in PRDs specifying ISA-101 High Performance principles: gray backgrounds for reduced fatigue, abnormal-only color usage, and information density appropriate to operator tasks."

  - "Define navigation hierarchy in PRDs that mirrors equipment structure: Site Overview → Area Overview → Equipment Detail screens. Include role-based access levels (operator, supervisor, engineer) for each screen type."

  - "Specify ISA-101 screen types in HMI requirements: Overview (multi-area status), Area (single area detail), Equipment (individual equipment control), Alarm Summary, and Trend displays. Map each type to equipment hierarchy levels."

  - "Document ISA-101 color philosophy in PRDs: neutral gray backgrounds (`#888888` or similar), green/red reserved exclusively for abnormal states, no decorative gradients or 3D effects. This reduces operator fatigue and improves alarm visibility."

  # ISA-18.2 Alarm Management Memories
  - "Include an Alarm Management section in PRDs for industrial projects. Define the ISA-18.2 priority scheme (recommend 4 levels: Critical, High, Medium, Low), expected alarm count targets, and rationalization approach."

  - "Specify ISA-18.2 alarm state requirements in PRDs: Active (condition present), Acknowledged (operator aware), Cleared (condition resolved), and Suppressed (intentionally hidden). Document state transition logging requirements for compliance."

  - "Document shelving requirements in PRDs per ISA-18.2: maximum shelving duration, required authorization levels, and logging requirements. Shelving enables temporary suppression during maintenance or known conditions without disabling alarms permanently."

  - "Include alarm rationalization requirements in PRDs: each configured alarm should have documented consequence, required response, and response time. Reference ISA-18.2 target of ~6 alarms per hour per operator for effective management."

  # ISA-88 Batch Pattern Memories
  - "Identify batch process projects early: food & beverage, pharmaceuticals, chemicals, and specialty materials typically require ISA-88 concepts. Continuous processes (oil refining, power generation, water treatment) do not."

  - "When the project involves batch processing, include an ISA-88 section in PRDs covering the procedural model: Recipe (product definition) → Procedure (sequence) → Unit Procedure (equipment allocation) → Operation → Phase (discrete action)."

  - "Document ISA-88 equipment model requirements in PRDs: Process Cell (batch execution boundary), Unit (major equipment), Equipment Module (functional group), and Control Module (device). Map these to UDT hierarchy design."

  - "Include recipe management requirements for batch projects: master recipes (templates), control recipes (runtime copies), batch records (execution history). Specify whether Ignition's built-in batch module or custom implementation is required."

  # Ignition Platform Feature Memories
  - "Recommend Perspective for new projects requiring mobile access, responsive design, or web-based deployment. Recommend Vision only for legacy integration or when existing Vision screens must be maintained. Document this decision in the PRD Technology section."

  - "Include Tag Historian requirements in PRDs: specify which tags require history, sampling rates (1 second to 1 hour typical), retention periods, and aggregation needs. Tag Historian configuration drives database sizing and licensing."

  - "Document Ignition Alarming requirements in PRDs: alarm notification pipelines (email, SMS, voice), escalation rules, and on-call roster integration. Ignition's built-in alarming supports ISA-18.2 states and priorities natively."

  - "Specify required Ignition modules in PRDs: Perspective (web HMI), Vision (desktop HMI), Tag Historian, Alarming, Reporting, SQL Bridge, OPC-UA. Each module has licensing implications — document core vs. optional modules clearly."

  - "Consider Gateway architecture in PRDs for multi-site or high-availability requirements: single Gateway (simple), Gateway Network (distributed), redundant pair (high availability). Document concurrent user estimates and Gateway licensing needs."

  # Safety Awareness Reinforcement Memories (companion to critical actions)
  - "Include a Safety Scope section in PRDs that explicitly lists which equipment, interlocks, or emergency stops are SIS (Safety Instrumented System) scope. SIS components are not controlled by SCADA — note the boundary clearly to prevent scope confusion."

  - "Include a Network Architecture section in PRDs documenting IT/OT boundaries: control network (Level 2), DMZ (Level 3.5), and business network (Level 4-5). Reference IEC 62443 zones and conduits for OT security requirements."

  - "Include an Engineering Authority section in PRDs documenting which configurations require MOC (Management of Change) processes, certified engineer sign-off, or regulatory compliance review. This protects against unauthorized safety-critical changes."

# Add custom menu items (appended to base menu)
# Don't include * prefix or help/exit - auto-injected
menu: []
# Example:
# menu:
#   - trigger: my-workflow
#     workflow: "{project-root}/custom/my.yaml"
#     description: My custom workflow

# Add custom prompts (for action="#id" handlers)
prompts: []
# Example:
# prompts:
# - id: my-prompt
#   content: |
#     Prompt instructions here
